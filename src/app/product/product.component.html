<main>
  <mat-card>
    <mat-card-header>
      <mat-card-title>Cadastro de Produtos</mat-card-title>
      <mat-card-subtitle>Cadastro de Produtos</mat-card-subtitle>
    </mat-card-header>
    <mat-card-actions align="end" class="mb-2">
      <button
        mat-flat-button
        mat-button
        color="primary"
        class="me-2"
        (click)="listProducts()"
        *ngIf="!typeAdd"
      >
        Pesquisar
      </button>

      <button
        mat-flat-button
        mat-button
        color="primary"
        class="me-2"
        (click)="!typeAdd ? addProduct() : search()"
      >
        {{ typeAdd ? "Voltar" : "Adicionar" }}
      </button>
    </mat-card-actions>
    <mat-card-content *ngIf="!typeAdd">
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z0">
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Actions</th>
          <td mat-cell *matCellDef="let element" width="15%">
            <button mat-icon-button color="primary" class="mx-1" (click)="edit(element)">
              <mat-icon>edit</mat-icon>
            </button>
            <button
              mat-icon-button
              color="primary"
              class="mx-1"
              (click)="delete(element)"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="sku">
          <th mat-header-cell *matHeaderCellDef>SKU</th>
          <td mat-cell *matCellDef="let element">{{ element.sku }}</td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Nome</th>
          <td mat-cell *matCellDef="let element">{{ element.name }}</td>
        </ng-container>

        <!-- Weight Column -->
        <ng-container matColumnDef="stock">
          <th mat-header-cell *matHeaderCellDef>Estoque</th>
          <td mat-cell *matCellDef="let element">{{ element.stock }}</td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="cost">
          <th mat-header-cell *matHeaderCellDef>Custo</th>
          <td mat-cell *matCellDef="let element">{{ element.cost }}</td>
        </ng-container>

        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef>Preço</th>
          <td mat-cell *matCellDef="let element">{{ element.price }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </mat-card-content>
    <mat-card-content *ngIf="typeAdd">
      <form [formGroup]="form">
        <div class="row">
          <div class="col col-2">
            <mat-form-field appearance="outline" floatLabel="always">
              <mat-label>Sku</mat-label>
              <input matInput placeholder="" formControlName="sku" />
            </mat-form-field>
          </div>
          <div class="col col-10">
            <mat-form-field appearance="outline" floatLabel="always">
              <mat-label>Nome</mat-label>
              <input matInput placeholder="" formControlName="name" />
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col col-4">
            <mat-form-field appearance="outline" floatLabel="always">
              <mat-label>Estoque</mat-label>
              <input
                matInput
                placeholder=""
                formControlName="stock"
                class="text-end"
              />
            </mat-form-field>
          </div>
          <div class="col col-4">
            <mat-form-field appearance="outline" floatLabel="always">
              <mat-label>Custo</mat-label>
              <input
                matInput
                placeholder=""
                formControlName="cost"
                class="text-end"
              />
            </mat-form-field>
          </div>
          <div class="col col-4">
            <mat-form-field appearance="outline" floatLabel="always">
              <mat-label>Preço</mat-label>
              <input
                matInput
                placeholder=""
                formControlName="price"
                class="text-end"
              />
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col-12 text-end">
            <button
              mat-flat-button
              mat-button
              color="warn"
              class="me-2"
              (click)="submit()"
            >
              Salvar
            </button>
          </div>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</main>
